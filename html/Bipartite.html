
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Bipartite</title><meta name="generator" content="MATLAB 7.13"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2013-03-11"><meta name="DC.source" content="Bipartite.m"><style type="text/css">

body {
  background-color: white;
  margin:10px;
}

h1 {
  color: #990000; 
  font-size: x-large;
}

h2 {
  color: #990000;
  font-size: medium;
}

/* Make the text shrink to fit narrow windows, but not stretch too far in 
wide windows. */ 
p,h1,h2,div.content div {
  max-width: 600px;
  /* Hack for IE6 */
  width: auto !important; width: 600px;
}

pre.codeinput {
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
} 

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #A020F0}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

  </style></head><body><div class="content"><pre class="codeinput"><span class="keyword">classdef</span> Bipartite &lt; handle
    <span class="comment">% Bipartite Main code class.</span>
    <span class="comment">% This class is the main part of the code and</span>
    <span class="comment">% is used as bridge between all the algorithms and funtionalities of</span>
    <span class="comment">% this software.</span>
    <span class="comment">%</span>
    <span class="comment">% Bipartite Properties:</span>
    <span class="comment">%    webmatrix - Interaction matrix (not neccesearly a binary matrix).</span>
    <span class="comment">%    adjacency - Adjacency matrix (binary matrix)</span>
    <span class="comment">%    modules - Instance of the modularity algorithm</span>
    <span class="comment">%    nestedness - Instance of a nestedness algorithm</span>
    <span class="comment">%    num_edges - Number of edges</span>
    <span class="comment">%    connectance - Fill of the webmatrix</span>
    <span class="comment">%    n_rows - Number of rows</span>
    <span class="comment">%    n_cols - Number of columns</span>
    <span class="comment">%    size_webmatrix - Size of the matrix (n_rows times n_cols);</span>
    <span class="comment">%    row_degrees - Degrees of each row node.</span>
    <span class="comment">%    col_degrees - Degrees of each col node.</span>
    <span class="comment">%    name - Name of the network</span>
    <span class="comment">%    tests - Object of the statistical analysis class (TEST).</span>
    <span class="comment">%    row_labels - Labels for row nodes.</span>
    <span class="comment">%    col_labels - Labels for col nodes.</span>
    <span class="comment">%    printer - Object of the class Print.m for output.</span>
    <span class="comment">%    plotter - Instance of the class PlotWebs.m for plotting matrices and graphs.</span>
    <span class="comment">%    rows_idx - Id's of the row nodes</span>
    <span class="comment">%    cols_idx - Id's of the col nodes.</span>
    <span class="comment">%    testmodule - Instance of the class TestModules.m for multi-scale analysis.</span>
    <span class="comment">%</span>
    <span class="comment">% Bipartite Methods:</span>
    <span class="comment">%    Bipartite - Main constructor</span>
    <span class="keyword">properties</span>
        webmatrix             = []; <span class="comment">% Interaction matrix (not neccesearly a binary matrix).</span>
        adjacency             = []; <span class="comment">% Adjacency matrix (binary matrix)</span>
        modules               = {}; <span class="comment">% Instance of the modularity algorithm</span>
        nestedness            = {}; <span class="comment">% Instance of a nestedness algorithm</span>
        num_edges             = 0; <span class="comment">% Number of edges</span>
        connectance           = 0; <span class="comment">% Fill of the webmatrix</span>
        n_rows                = 0; <span class="comment">% Number of rows</span>
        n_cols                = 0; <span class="comment">% Number of columns</span>
        size_webmatrix        = 0; <span class="comment">% Size of the matrix (n_rows times n_cols);</span>
        row_degrees           = []; <span class="comment">% Degrees of each row node.</span>
        col_degrees           = []; <span class="comment">% Degrees of each col node.</span>
        name                  = {}; <span class="comment">% Name of the network</span>
        tests                 = {}; <span class="comment">% Object of the statistical analysis class (TEST).</span>
        row_labels            = {}; <span class="comment">% Labels for row nodes.</span>
        col_labels            = {}; <span class="comment">% Labels for col nodes.</span>
        printer               = {}; <span class="comment">% Object of the class Print.m for output.</span>
        plotter               = {}; <span class="comment">% Instance of the class PlotWebs.m for plotting matrices and graphs.</span>
        rows_idx              = []; <span class="comment">% Id's of the row nodes</span>
        cols_idx              = []; <span class="comment">% Id's of the col nodes.</span>
        testmodule            = {}; <span class="comment">% Instance of the class TestModules.m for multi-scale analysis.</span>
    <span class="keyword">end</span>

    <span class="keyword">methods</span>

        <span class="keyword">function</span> obj = Bipartite(web,namebip)
            <span class="comment">%Main Constructor</span>

            <span class="keyword">if</span>(nargin == 0)
               error(<span class="string">'You need to specify a double matrix or a txt file in matrix format'</span>);
            <span class="keyword">end</span>

            <span class="keyword">if</span>(nargin == 1 &amp;&amp; (isa(web,<span class="string">'double'</span>)||isa(web,<span class="string">'logical'</span>))); namebip = <span class="string">'No name'</span>; <span class="keyword">end</span>;

            <span class="keyword">if</span>(nargin == 1 &amp;&amp; isa(web,<span class="string">'char'</span>))
                [paths namefile ext] = fileparts(web);
                namebip = namefile;
                web = dlmread(web,<span class="string">' '</span>);
            <span class="keyword">end</span>
            web = 1.0*web;

            obj.name = namebip;
            obj.webmatrix = web;

            <span class="comment">%General Properties</span>
            [obj.n_rows obj.n_cols] = size(web);
            <span class="keyword">if</span>(obj.n_rows == 0 || obj.n_cols == 0)
                <span class="keyword">return</span>;
            <span class="keyword">end</span>;
            obj.size_webmatrix = obj.n_rows * obj.n_cols;
            obj.adjacency = 1.0*(obj.webmatrix &gt; 0);
            obj.num_edges = sum(obj.adjacency(:));
            obj.connectance = sum(obj.adjacency(:))/numel(obj.adjacency);

            <span class="comment">%Degree</span>
            obj.row_degrees = sum(obj.adjacency,2);
            obj.col_degrees = sum(obj.adjacency,1)';

            <span class="comment">%Nestedness</span>
            obj.nestedness = NODF(obj.adjacency,obj.nodf_strict);

            <span class="comment">%Modularity</span>
            <span class="comment">%obj.modules = LPBrim(obj.webmatrix);NewmanAlgorithm</span>
            <span class="comment">%obj.modules = NewmanModularity(obj.webmatrix);</span>
            obj.modules = AdaptiveBrim(obj.webmatrix);

            <span class="comment">%Statistical tests</span>
            obj.tests = Test(obj);

            <span class="comment">%Output</span>
            obj.printer = Printer(obj);

            <span class="comment">%Matrix and graph layouts</span>
            obj.plotter = PlotWebs(obj);

            <span class="comment">%Multi-scale analysis</span>
            obj.testmodule = TestModules(obj);

            <span class="comment">%Default labels</span>
            <span class="keyword">for</span> i = 1:obj.n_rows; obj.row_labels{i} = sprintf(<span class="string">'row%03i'</span>,i); <span class="keyword">end</span>;
            <span class="keyword">for</span> i = 1:obj.n_cols; obj.col_labels{i} = sprintf(<span class="string">'col%03i'</span>,i); <span class="keyword">end</span>;

        <span class="keyword">end</span>

    <span class="keyword">end</span>

<span class="keyword">end</span>
</pre><p class="footer"><br>
      Published with MATLAB&reg; 7.13<br></p></div><!--
##### SOURCE BEGIN #####
classdef Bipartite < handle
    % Bipartite Main code class. 
    % This class is the main part of the code and
    % is used as bridge between all the algorithms and funtionalities of
    % this software.
    %
    % Bipartite Properties:
    %    webmatrix - Interaction matrix (not neccesearly a binary matrix).
    %    adjacency - Adjacency matrix (binary matrix)
    %    modules - Instance of the modularity algorithm
    %    nestedness - Instance of a nestedness algorithm
    %    num_edges - Number of edges
    %    connectance - Fill of the webmatrix
    %    n_rows - Number of rows
    %    n_cols - Number of columns
    %    size_webmatrix - Size of the matrix (n_rows times n_cols);
    %    row_degrees - Degrees of each row node.
    %    col_degrees - Degrees of each col node.
    %    name - Name of the network
    %    tests - Object of the statistical analysis class (TEST).
    %    row_labels - Labels for row nodes.
    %    col_labels - Labels for col nodes.
    %    printer - Object of the class Print.m for output.
    %    plotter - Instance of the class PlotWebs.m for plotting matrices and graphs.
    %    rows_idx - Id's of the row nodes
    %    cols_idx - Id's of the col nodes.
    %    testmodule - Instance of the class TestModules.m for multi-scale analysis.
    %
    % Bipartite Methods:
    %    Bipartite - Main constructor
    properties
        webmatrix             = []; % Interaction matrix (not neccesearly a binary matrix).
        adjacency             = []; % Adjacency matrix (binary matrix)
        modules               = {}; % Instance of the modularity algorithm
        nestedness            = {}; % Instance of a nestedness algorithm
        num_edges             = 0; % Number of edges
        connectance           = 0; % Fill of the webmatrix
        n_rows                = 0; % Number of rows
        n_cols                = 0; % Number of columns
        size_webmatrix        = 0; % Size of the matrix (n_rows times n_cols);
        row_degrees           = []; % Degrees of each row node.
        col_degrees           = []; % Degrees of each col node.
        name                  = {}; % Name of the network
        tests                 = {}; % Object of the statistical analysis class (TEST).
        row_labels            = {}; % Labels for row nodes.
        col_labels            = {}; % Labels for col nodes.
        printer               = {}; % Object of the class Print.m for output.
        plotter               = {}; % Instance of the class PlotWebs.m for plotting matrices and graphs.
        rows_idx              = []; % Id's of the row nodes
        cols_idx              = []; % Id's of the col nodes.
        testmodule            = {}; % Instance of the class TestModules.m for multi-scale analysis.
    end
    
    methods
        
        function obj = Bipartite(web,namebip)
            %Main Constructor
            
            if(nargin == 0)
               error('You need to specify a double matrix or a txt file in matrix format');
            end
            
            if(nargin == 1 && (isa(web,'double')||isa(web,'logical'))); namebip = 'No name'; end;
            
            if(nargin == 1 && isa(web,'char'))
                [paths namefile ext] = fileparts(web);
                namebip = namefile;
                web = dlmread(web,' ');
            end
            web = 1.0*web;
            
            obj.name = namebip;
            obj.webmatrix = web;
            
            %General Properties
            [obj.n_rows obj.n_cols] = size(web);
            if(obj.n_rows == 0 || obj.n_cols == 0)
                return;
            end;
            obj.size_webmatrix = obj.n_rows * obj.n_cols;
            obj.adjacency = 1.0*(obj.webmatrix > 0);
            obj.num_edges = sum(obj.adjacency(:));
            obj.connectance = sum(obj.adjacency(:))/numel(obj.adjacency);
            
            %Degree
            obj.row_degrees = sum(obj.adjacency,2);
            obj.col_degrees = sum(obj.adjacency,1)';
            
            %Nestedness
            obj.nestedness = NODF(obj.adjacency,obj.nodf_strict);
            
            %Modularity
            %obj.modules = LPBrim(obj.webmatrix);NewmanAlgorithm
            %obj.modules = NewmanModularity(obj.webmatrix);
            obj.modules = AdaptiveBrim(obj.webmatrix);
            
            %Statistical tests
            obj.tests = Test(obj);
            
            %Output
            obj.printer = Printer(obj);
            
            %Matrix and graph layouts
            obj.plotter = PlotWebs(obj);
            
            %Multi-scale analysis
            obj.testmodule = TestModules(obj);
            
            %Default labels
            for i = 1:obj.n_rows; obj.row_labels{i} = sprintf('row%03i',i); end;
            for i = 1:obj.n_cols; obj.col_labels{i} = sprintf('col%03i',i); end;
            
        end

    end
       
end


##### SOURCE END #####
--></body></html>